window.__require=function t(e,i,o){function a(c,l){if(!i[c]){if(!e[c]){var n=c.split("/");if(n=n[n.length-1],!e[n]){var s="function"==typeof __require&&__require;if(!l&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+c+"'")}}var p=i[c]={exports:{}};e[c][0].call(p.exports,function(t){return a(e[c][1][t]||t)},p,p.exports,t,e,i,o)}return i[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)a(o[c]);return a}({GameData:[function(t,e,i){"use strict";cc._RF.push(e,"ab8b05+tZpLhYG5ZpbtWKCF","GameData"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){return function(){this.COL_NUM=10,this.ROW_NUM=10,this.MAX_NUM=26,this.GAME_TIME=60,this.addtime=0,this.LV=1,this.initUser={uid:0,lv:1,lvs:{1:0},star:0,volume:1,maxscore:0}}}();i.GameData=o,cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"db896AH5P9L5qT4ie5DWe8+","Game"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Global"),a=t("./common/Utils"),r=t("./Gird"),c=cc._decorator,l=c.ccclass,n=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=null,e.gird=null,e.girdBg=null,e.LVLebel=null,e.graphicsBg=null,e.combo=0,e.num=0,e.score=0,e.gameTime=0,e.isGameVoer=!1,e.girds=[],e.titleWidth=0,e.titleHeight=0,e.gap=5,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.click=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.num=Math.min(Math.max(o.Global.gameData.LV/2,1),o.Global.gameData.MAX_NUM),this.gameTime=o.Global.gameData.GAME_TIME+o.Global.gameData.addtime,o.Global.gameData.addtime=0,this.LVLebel.string="LV."+o.Global.gameData.LV,this.titleWidth=(this.girdBg.width-o.Global.gameData.COL_NUM*this.gap)/o.Global.gameData.COL_NUM,this.titleHeight=(this.girdBg.height-o.Global.gameData.ROW_NUM*this.gap)/o.Global.gameData.ROW_NUM;for(var t=0;t<o.Global.gameData.COL_NUM;t++){this.girds[t]=[];for(var e=0;e<o.Global.gameData.ROW_NUM;e++)this.girds[t][e]=null}this.initBoard();var i=Math.floor(o.Global.gameData.COL_NUM*o.Global.gameData.ROW_NUM*.9),a=o.Global.gameData.COL_NUM*o.Global.gameData.ROW_NUM*.1+.25*o.Global.gameData.LV;this.addGirds(Math.floor(Math.min(a,i))),this.check()},e.prototype.check=function(){for(var t={},e=!1,i=0;i<o.Global.gameData.COL_NUM&&!e;i++)for(var a=0;a<o.Global.gameData.ROW_NUM;a++){var r=this.girds[i][a];if(null!=r){var c=t[r.type];if(null==c&&(c=0),c++,t[r.type]=c,c>=2){e=!0;break}}}if(e)for(i=0;i<o.Global.gameData.COL_NUM;i++)for(a=0;a<o.Global.gameData.ROW_NUM;a++){var l=cc.v2(i,a);if(this.cilcked(l,!0))return!0}else this.gamePass()},e.prototype.gamePass=function(){this.isGameVoer=!0,cc.log("Global.gameData.initUser.lv---------\x3e",o.Global.gameData),o.Global.gameData.LV++,cc.director.loadScene("Game")},e.prototype.cilcked=function(t,e){var i=this,r=[1,-1],c=this.girds[t.x][t.y],l={};null!=c&&(null==l[c.type]&&(l[c.type]=[]),(d=l[c.type]).push(c));for(var n in r)for(var s=t.x,p=t.y,u=r[n],h=0;h<o.Global.gameData.COL_NUM&&!(s<0||s>=o.Global.gameData.COL_NUM);h++){if(null!=(_=this.girds[s][p])){if(_==c){s+=u;continue}if(null!=c&&_.type!=c.type)break;null==l[_.type]&&(l[_.type]=[]);var d=l[_.type],g=!1;for(var f in d){if((m=d[f])!=c&&m==_){g=!0;break}}if(g)continue;l[_.type].push(_);break}s+=u}for(var n in!1,r)for(s=t.x,p=t.y,u=r[n],h=0;h<o.Global.gameData.ROW_NUM&&!(p<0||p>=o.Global.gameData.ROW_NUM);h++){var _;if(null!=(_=this.girds[s][p])){if(_==c){p+=u;continue}if(null!=c&&_.type!=c.type)break;null==l[_.type]&&(l[_.type]=[]);d=l[_.type],g=!1;for(var f in d){var m;if((m=d[f])==_){g=!0;break}}if(g)continue;l[_.type].push(_);break}p+=u}var y=!1,v=0;for(var f in l){if((d=l[f]).length>=2){if(e)return!0;y=!0,this.click=!1;var b=function(e){var i=d[e];G.girds[i.x][i.y]=null;var o=cc.moveTo(.3,cc.v2(t.x*(G.titleWidth+G.gap),t.y*(G.titleHeight+G.gap))),r=cc.callFunc(function(){i.parent=null,a.Utils.putPoolType("Gird",i.node)});cc.log("gird----------\x3e",typeof i);var c=cc.sequence(o,r).easing(cc.easeCubicActionIn());i.node.runAction(c)},G=this;for(var M in d)b(M);v+=d.length}}if(e)return!1;v>0&&this.scheduleOnce(function(){switch(v){case 1:i.playEffect("star1");break;case 2:i.playEffect("star2");break;case 3:i.playEffect("star3");break;case 4:i.playEffect("star4")}},.3),y||null!=c||(this.addGirds(2),this.check())},e.prototype.playEffect=function(t){var e=this;cc.loader.loadRes("sound/sound/"+t,cc.AudioClip,function(t,i){var o=cc.audioEngine.playEffect(i,!1);cc.audioEngine.setFinishCallback(o,function(){e.check()})})},e.prototype.addGirds=function(t){for(var e=[],i=0;i<o.Global.gameData.COL_NUM;i++)for(var r=0;r<o.Global.gameData.ROW_NUM;r++){null==this.girds[i][r]&&e.push({x:i,y:r})}for(var c=a.Utils.shuffule(e),l=0;l<t;l+=1){var n=c[l],s=Math.floor(Math.random()*this.num)+1;this.creatGirds(s,n.x,n.y)}},e.prototype.creatGirds=function(t,e,i){var o=a.Utils.getPoolType("Gird");null==o&&(o=cc.instantiate(this.gird));var c=o.getComponent(r.default);c.init(e,i,t),o.setPosition(e*(this.titleWidth+this.gap),i*(this.titleHeight+this.gap)),o.parent=this.girdBg,this.girds[e][i]=c,o.width=this.titleWidth,o.height=this.titleHeight},e.prototype.initBoard=function(){this.startX=-this.gap/2,this.startY=-this.gap/2,this.boardWidth=this.girdBg.width,this.boardHeight=this.girdBg.height,this.graphicsBg.clear();for(var t=0;t<o.Global.gameData.COL_NUM+1;t++)this.graphicsBg.moveTo(this.startX+t*(this.titleWidth+this.gap),this.startY),this.graphicsBg.lineTo(this.startX+t*(this.titleWidth+this.gap),this.startY+this.boardHeight),this.graphicsBg.stroke();for(var e=0;e<o.Global.gameData.ROW_NUM+1;e++)this.graphicsBg.moveTo(this.startX,this.startY+e*(this.titleHeight+this.gap)),this.graphicsBg.lineTo(this.startX+this.boardWidth,this.startY+e*(this.titleHeight+this.gap)),this.graphicsBg.stroke()},e.prototype.start=function(){this.init()},e.prototype.init=function(){var t=this;this.click=!0,this.girdBg.on(cc.Node.EventType.TOUCH_START,function(e){var i=t.girdBg.convertToNodeSpaceAR(e.getLocation()),o=cc.v2(Math.floor(i.x/(t.titleWidth+t.gap)),Math.floor(i.y/(t.titleHeight+t.gap)));t.cilcked(o,!1)})},e.prototype.gameOver=function(){},e.prototype.upDateTime=function(){this.time.string=Math.round(this.gameTime)+""},e.prototype.update=function(t){if(!this.isGameVoer){if(this.gameTime-=t,this.gameTime<=0)return this.gameOver(),void(this.isGameVoer=!0);this.upDateTime()}},__decorate([n({type:cc.Label,tooltip:"\u65f6\u95f4"})],e.prototype,"time",void 0),__decorate([n({type:cc.Prefab,tooltip:"\u683c\u5b50\u9884\u5236\u4f53"})],e.prototype,"gird",void 0),__decorate([n({type:cc.Node,tooltip:"\u80cc\u666f"})],e.prototype,"girdBg",void 0),__decorate([n({type:cc.Label,tooltip:"\u5173\u5361"})],e.prototype,"LVLebel",void 0),__decorate([n({type:cc.Graphics,tooltip:"\u753b\u5e03"})],e.prototype,"graphicsBg",void 0),e=__decorate([l],e)}(cc.Component);i.default=s,cc._RF.pop()},{"./Gird":"Gird","./Global":"Global","./common/Utils":"Utils"}],Gird:[function(t,e,i){"use strict";cc._RF.push(e,"28eb9UCT7BNy6U6/mz29Q4n","Gird"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,r=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.spriteFrames=[],e.x=0,e.y=0,e.type=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(t,e,i){this.x=t,this.y=e,this.type=i,this.icon.spriteFrame=this.spriteFrames[i-1]},__decorate([r({type:cc.Sprite,tooltip:"\u7eb9\u7406"})],e.prototype,"icon",void 0),__decorate([r({type:cc.SpriteFrame,tooltip:"\u7eb9\u7406"})],e.prototype,"spriteFrames",void 0),e=__decorate([a],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"075815ON4dMEY33PB6rtu6e","Global"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./GameData"),a=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.gameData=new o.GameData,e=__decorate([a],e)}(cc.Component);i.Global=r,cc._RF.pop()},{"./GameData":"GameData"}],LevelItem:[function(t,e,i){"use strict";cc._RF.push(e,"4ddbaWusixFXI82+GG2ESPz","LevelItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,r=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.label.string=t},__decorate([r(cc.Label)],e.prototype,"label",void 0),e=__decorate([a],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],Level:[function(t,e,i){"use strict";cc._RF.push(e,"e9ec5IHfxVJDqXDZpIlXIWu","Level"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./LevelItem"),a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level_item=null,e.scrollView=null,e}return __extends(e,t),e.prototype.start=function(){this.initItem()},e.prototype.initItem=function(){var t=this;this.scrollView.content.removeAllChildren();for(var e=0;e<99;e++){var i=cc.instantiate(this.level_item);i.getComponent(o.default).init(e+1),i.parent=this.scrollView.content,i.on(cc.Node.EventType.TOUCH_START,function(){cc.log("--------1111-------"),t.startGame()})}},e.prototype.startGame=function(){cc.director.loadScene("Game")},__decorate([c({type:cc.Prefab,tooltip:"\u5173\u5361"})],e.prototype,"level_item",void 0),__decorate([c({type:cc.ScrollView,tooltip:"\u5bb9\u5668"})],e.prototype,"scrollView",void 0),e=__decorate([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./LevelItem":"LevelItem"}],Login:[function(t,e,i){"use strict";cc._RF.push(e,"28fec8xiQJGP4gmYVOo5pfN","Login"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,r=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.begin_button=null,e}return __extends(e,t),e.prototype.start=function(){cc.loader.loadRes("sound/bgSound/login",cc.AudioClip,function(t,e){cc.audioEngine.playMusic(e,!0);cc.audioEngine.setMusicVolume(.5)})},e.prototype.goToGameScene=function(){this.begin_button.enabled=!1,cc.director.loadScene("level")},__decorate([r({type:cc.Button,tooltip:"\u6309\u94ae"})],e.prototype,"begin_button",void 0),e=__decorate([a],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"21de19E+lVDga4eGF0b6PYr","Utils"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.shuffule=function(t){for(var e=t.length,i=0;i<e-1;i++){var o=Math.floor(Math.random()*(e-i)),a=t[o];t[o]=t[e-i-1],t[e-i-1]=a}return t},e.getPoolType=function(t){this.pools||(this.pools={});var e=this.pools[t];return e||(e=new cc.NodePool(t),this.pools[t]=e),e.get()},e.putPoolType=function(t,e){this.pools||(this.pools={});var i=this.pools[t];i||(this.getPoolType(t),i=this.pools(t)),i.put(e)},e.pools=null,e}(cc.Component);i.Utils=o,cc._RF.pop()},{}]},{},["Game","GameData","Gird","Global","Level","LevelItem","Login","Utils"]);